{"version":3,"file":"growfield.js","sources":["../src/growfield.js"],"sourcesContent":["/*!\n  growfield v0.0.1 (https://growfield.js.org)\n  by Kodie Grantham (https://kodieg.com)\n*/\n\nconst growfield = (selector, options) => {\n  if (!selector) selector = '.growfield'\n\n  options = Object.assign({}, growfield.defaultOptions, options)\n\n  let elements\n\n  if (typeof selector === 'string') {\n    elements = document.querySelectorAll(selector)\n  } else if (selector instanceof HTMLElement) {\n    elements = [elements]\n  }\n\n  if (elements && elements.length) {\n    for (let i = 0; i < elements.length; i++) {\n      (function (element) {\n        element.style.setProperty('height', 'auto')\n        element.style.setProperty('max-height', 'none')\n        element.style.setProperty('min-height', 'none')\n        element.style.setProperty('resize', 'none')\n\n        element.growfield = options\n\n        element.addEventListener('input', growfield.onInput)\n        element.dispatchEvent(new Event('input', { bubbles: true }))\n      })(elements[i])\n    }\n  }\n\n  if (elements.length) {\n    if (elements.length === 1) {\n      return elements[0]\n    }\n\n    return elements\n  }\n\n  return false\n}\n\ngrowfield.defaultOptions = {\n  maxRows: null,\n  minRows: null\n}\n\ngrowfield.onInput = (e) => {\n  const element = e.currentTarget\n  const opts = element.growfield\n\n  element.setAttribute('rows', '1')\n\n  const style = getComputedStyle(element)\n  const blockPadding = (parseFloat(style['padding-top']) + parseFloat(style['padding-bottom']))\n  const inlinePadding = (parseFloat(style['padding-left']) + parseFloat(style['padding-right']))\n  const inlineBorderWidth = (parseFloat(style['border-left-width']) + parseFloat(style['border-right-width']))\n\n  element.style.setProperty('overflow', 'hidden', 'important')\n\n  const width = (parseFloat(style.width) - inlinePadding - inlineBorderWidth)\n\n  element.style.setProperty('border-width', '0')\n  element.style.setProperty('box-sizing', 'content-box')\n  element.style.setProperty('padding-inline', '0')\n  element.style.setProperty('width', String(width) + 'px')\n\n  const lineHeight = style['line-height'] === 'normal' ? parseFloat(style.height) : parseFloat(style['line-height'])\n  const scrollHeight = Math.round(element.scrollHeight)\n\n  element.style.removeProperty('border-width')\n  element.style.removeProperty('box-sizing')\n  element.style.removeProperty('overflow')\n  element.style.removeProperty('padding-inline')\n  element.style.removeProperty('width')\n\n  let rows = Math.max(opts.minRows || 1, Math.round((scrollHeight - blockPadding) / lineHeight))\n\n  if (opts.maxRows) {\n    rows = Math.min(rows, opts.maxRows)\n  }\n\n  element.setAttribute('rows', String(rows))\n}\n\nexport default growfield\n"],"names":["growfield","selector","options","Object","assign","defaultOptions","elements","document","querySelectorAll","HTMLElement","length","i","element","style","setProperty","addEventListener","onInput","dispatchEvent","Event","bubbles","maxRows","minRows","e","currentTarget","opts","setAttribute","getComputedStyle","blockPadding","parseFloat","inlinePadding","inlineBorderWidth","width","String","lineHeight","height","scrollHeight","Math","round","removeProperty","rows","max","min"],"mappings":"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"}